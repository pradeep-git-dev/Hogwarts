{% extends 'base.html' %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="min-h-screen p-8">

    <h1 class="text-3xl font-bold mb-6">
        Welcome, {{ request.user.first_name|default:request.user.username }}
    </h1>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">

        <!-- Stats Card -->
        <div class="bg-card p-6 rounded-xl shadow">
            <h2 class="text-xl font-semibold mb-3">Your Stats</h2>
            <p class="mt-2">Points: <strong>{{ gamification_stats.points }}</strong></p>
            <p class="mt-2">Level: <strong>{{ gamification_stats.level }}</strong></p>
            <p class="mt-2">Badges: <strong>{{ gamification_stats.badges|length }}</strong></p>
        </div>

        <!-- Activities -->
        <div class="bg-card p-6 rounded-xl shadow md:col-span-2">
            <h2 class="text-xl font-semibold mb-4">Recent Activity</h2>

            {% if activities %}
                <ul class="space-y-3">
                    {% for activity in activities %}
                    <li class="p-3 bg-muted rounded">
                        {{ activity.get_activity_type_display }} â€” {{ activity.timestamp }}
                    </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p class="text-muted-foreground">No recent activity yet.</p>
            {% endif %}
        </div>

    </div>

    <!-- Classrooms -->
    <div class="mt-10">
        <h2 class="text-2xl font-semibold mb-4">Your Classrooms</h2>

        {% if classrooms %}
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            {% for c in classrooms %}
            <div class="p-6 bg-card rounded-xl shadow">
                <h3 class="text-xl font-bold">{{ c.name }}</h3>
                <p class="text-muted-foreground">{{ c.description|default:"No description" }}</p>
                <p class="mt-2">Code: <strong>{{ c.code }}</strong></p>

                <a href="/classroom/{{ c.id }}/" 
                   class="mt-3 inline-block bg-primary text-white px-4 py-2 rounded-lg">
                    Open Classroom
                </a>
            </div>
            {% endfor %}
        </div>
        {% else %}
            <p class="text-muted-foreground">You are not enrolled in any classrooms.</p>
        {% endif %}
    </div>

</div>
{% endblock %}
